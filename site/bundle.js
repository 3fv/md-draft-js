!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=9)}([function(e,t,n){const r=n(6),o=n(24);e.exports.findTags=function(e,t,n){let r;const a=Object.assign({},e);return t&&(r=o(t,"","$"),a.before=a.before.replace(r,s),r=o(t,"^",""),a.selection=a.selection.replace(r,s)),n&&(r=o(n,"","$"),a.selection=a.selection.replace(r,c),r=o(n,"^",""),a.after=a.after.replace(r,c)),a;function s(e){return a.startTag+=e,""}function c(e){return a.endTag=e+a.endTag,""}},e.exports.skip=function(e,t){const n=t||{},o=Object.assign({},e);let a="before"in n?n.before:1,s="after"in n?n.after:1;return o.selection=o.selection.replace(/(^\n*)/,""),o.startTag+=RegExp.$1,o.selection=o.selection.replace(/(\n*$)/,""),o.endTag+=RegExp.$1,o.startTag=o.startTag.replace(/(^\n*)/,""),o.before+=RegExp.$1,o.endTag=o.endTag.replace(/(\n*$)/,""),o.after+=RegExp.$1,o.before&&(a+=1,o.before=c(o.before,a,"$")),o.after&&(s+=1,o.after=c(o.after,s,"")),o;function c(e,t,o){const a=n.any?"\\n*":r("\\n?",t),s=r("\n",t);return e.replace(new RegExp(a+o),s)}},e.exports.trim=function(e,t){const n=Object.assign({},e);return n.selection=n.selection.replace(/^(\s*)/,t?"":function(e){return n.before+=e,""}).replace(/(\s*)$/,t?"":function(e){return n.after=e+n.after,""}),n}},function(e,t){e.exports=function({before:e,after:t,startTag:n,endTag:r,...o}){return{before:e+n,after:r+t,startTag:"",endTag:"",...o}}},function(e,t,n){const r=n(22),{getSelection:o}=n(5),{bold:a,isBold:s}=n(23),{italic:c,isItalic:i}=n(25),{linkOrMediaOrAttachment:l}=n(26),{list:u}=n(28),{blockquote:f}=n(29),{codeblock:p,isCodeblock:d}=n(30),{notebook:g}=n(31),{heading:h}=n(32),{hr:m}=n(33);function b(e){const t=new Set;return s(e)&&t.add("BOLD"),i(e)&&t.add("ITALIC"),d(e)&&t.add("CODE"),t}e.exports.applyCommand=function(e,t,n){const r=Object.assign({},e,{focus:!0});switch(t){case"bold":return a(r);case"italic":return c(r);case"hr":return m(r);case"quote":return f(r);case"code":return p(r);case"notebook":return g(r,n);case"ul":return u(r);case"ol":return u(r,!0);case"heading":return h(r,n);case"link":return l(r,n,"link");case"media":return l(r,n,"media");default:return r}},e.exports.getChunks=function(e){const t=o(e),n=r(e.value.substring(0,t.start)),a=r(e.value.substring(t.start,t.end)),s={before:n,after:r(e.value.substring(t.end)),selection:a,startTag:"",endTag:"",scrollTop:e.scrollTop,text:e.value,focus:!1,getCurrentInlineStyle:()=>b(s)};return s},e.exports.isApplied=function(e,t){switch(t){case"bold":return s(e);case"italic":return i(e);case"code":return d(e);default:return!1}},e.exports.getCurrentInlineStyle=b},function(e,t){e.exports=React},function(e,t){e.exports.commands=[{combo:"cmd+b",key:"bold"},{combo:"cmd+i",key:"italic"},{combo:"cmd+e",key:"quote"},{combo:"cmd+j",key:"code"},{combo:"cmd+o",key:"ol"},{combo:"cmd+u",key:"ul"},{combo:"cmd+d",key:"heading"},{combo:"cmd+k",key:"link"},{combo:"cmd+g",key:"media"},{combo:"cmd+h",key:"hr"}],e.exports.settings={lineLength:80}},function(e,t){e.exports.setSelection=function({before:e,startTag:t,selection:n,scrollTop:r,focus:o},a){const s=e.length+t.length,c=s+n.length;void 0!==a.selectionStart&&(o&&a.focus(),a.selectionStart=s,a.selectionEnd=c,a.scrollTop=r)},e.exports.getSelection=function(e){return void 0!==e.selectionStart?{start:e.selectionStart,end:e.selectionEnd}:{start:0,end:0}}},function(e,t){e.exports=function(e,t){return new Array(t+1).join(e)}},function(e,t){const n="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",r=new RegExp(`^${n}`,""),o=new RegExp(`([^\\n])\\n(?!(\\n|${n}))`,"g"),a=/\s+$/;function s(e){return o.lastIndex=0,Object.assign({},e,{selection:e.selection.replace(o,"$1 $2")})}e.exports.wrap=function(e,t){const n=new RegExp(`(.{1,${t}})( +|$\\n?)`,"gm"),o=s(e);return o.selection=o.selection.replace(n,function(e,t){return r.test(e)?e:`${t}\n`}).replace(a,""),o},e.exports.unwrap=s},function(e,t,n){const{getCurrentInlineStyle:r}=n(2);function o(){const e={before:"",after:"",selection:"",startTag:"",endTag:"",scrollTop:0,focus:!1,getCurrentInlineStyle:()=>r(e)};return e}function a(e){return e.before+e.startTag+e.selection+e.endTag+e.after}e.exports.createEmpty=o,e.exports.createWithContent=function(e){let t;return e?"string"==typeof e?t={before:e}:"object"==typeof e&&(t=e):t=e,Object.assign(o(),t)},e.exports.getText=a,e.exports.replaceText=function(e,t,n){const r=e.before.length+e.startTag.length,o=a(e),s=o.indexOf(t),c=`${e.before}${e.startTag}`,i=`${e.selection}${e.endTag}${e.after}`;if(-1===s)return e;if(s>=r)return{...e,before:c,after:i.replace(t,n),selection:"",startTag:"",endTag:""};if(s+t.length<r)return{...e,before:c.replace(t,n),after:i,selection:"",startTag:"",endTag:""};const l=o.replace(t,n);return{...e,before:l.substring(0,c.length),after:l.substring(c.length),selection:"",startTag:"",endTag:""}}},function(e,t,n){e.exports=n(10)},function(e,t,n){const r=n(3),o=n(11),a=n(12);o.render(r.createElement(a),document.getElementById("root"))},function(e,t){e.exports=ReactDOM},function(e,t,n){(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i=n(14),l=n(3),u=n(15),f=n(16),p=f.Editor,d=f.EditorState,g=f.RichUtils,h=(n(2).isApplied,"# Sample title\n\nYour content goes here.");e.exports=function(e){function n(e){var t,o,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,s=a(n).call(this,e),(t=!s||"object"!==r(s)&&"function"!=typeof s?c(o):s).state={editorState:d.createWithContent(h)},t.onChange=function(e){return t.setState({editorState:e})},t.handleKeyCommand=t.handleKeyCommand.bind(c(c(t))),t}var f,m,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,l.Component),f=n,(m=[{key:"handleKeyCommand",value:function(e){var t=e.key,n=g.applyCommand(this.state.editorState,t);n&&this.onChange(n)}},{key:"onClickCommand",value:function(e){this.onChange(g.applyCommand(this.state.editorState,e))}},{key:"onLinkClick",value:function(){var e=t.prompt("Link URL:");e&&this.onChange(g.applyCommand(this.state.editorState,"link",e))}},{key:"onImageClick",value:function(){var e=t.prompt("Image URL:");e&&this.onChange(g.applyCommand(this.state.editorState,"media",e))}},{key:"render",value:function(){var e=this;return l.createElement("div",{className:"editor"},l.createElement("div",{className:"editor-buttons"},u.map(function(t,n){var r=t.command,o=(t.label,t.icon);return l.createElement("button",{key:n,className:i("editor-action",e.state.editorState.getCurrentInlineStyle().has(r)?"active":""),onClick:e.onClickCommand.bind(e,r),"aria-label":"Bold"},l.createElement("i",{key:"span-".concat(n),className:"fas fa-".concat(o||r),"aria-hidden":"true"}))}),l.createElement("button",{className:"editor-action",onClick:this.onLinkClick.bind(this),"aria-label":"Link"},l.createElement("span",{className:"glyphicon glyphicon-link","aria-hidden":"true"})),l.createElement("button",{className:"editor-action",onClick:this.onImageClick.bind(this),"aria-label":"Image"},l.createElement("span",{className:"glyphicon glyphicon-picture","aria-hidden":"true"}))),l.createElement(p,{autoFocus:!0,className:"editor-textarea",editorState:this.state.editorState,onKeyCommand:this.handleKeyCommand,onChange:this.onChange}))}}])&&o(f.prototype,m),b&&o(f,b),n}()}).call(this,n(13))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)&&r.length){var s=o.apply(null,r);s&&e.push(s)}else if("object"===a)for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t){e.exports=[{command:"bold",icon:"bold",label:"Bold"},{command:"italic",icon:"italic",label:"Italic"},{command:"heading",icon:"heading",label:"Heading"},{command:"quote",icon:"quote-right",label:"Quote"},{command:"code",icon:"code",label:"Monospace"},{command:"ul",icon:"list-ul",label:"List"},{command:"ol",icon:"list-ol",label:"Numbered"}]},function(e,t,n){const r=n(17),o=n(8),a=n(2);e.exports={Editor:r,EditorState:o,RichUtils:a}},function(e,t,n){const r=n(18),o=n(3),a=n(19),{commands:s}=n(4),{getChunks:c}=n(2),{isImage:i,getDataURL:l}=n(34),{setSelection:u}=n(5),{getText:f,replaceText:p}=n(8),d=e=>`![Uploading image${0===e?"":` (${e})`}]()`;class g extends o.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handlePaste=this.handlePaste.bind(this),this.handleDrop=this.handleDrop.bind(this),this.uploadingItems=[]}shouldComponentUpdate(e){return e.className!==this.props.className||["before","after","startTag","endTag","selection"].some(t=>e.editorState[t]!==this.props[t])}componentDidUpdate(){u(this.props.editorState,this.textarea)}handleKeyDown(e){this.props.commands.forEach(t=>{t.combo&&r(e,t.combo)&&(e.preventDefault(),this.props.onKeyCommand(t))})}handleChange(e){const t=c(e.target);this.props.onChange(t)}getUploadingItemIndex(){if(0===this.uploadingItems.length)return this.uploadingItems.push(0),0;const e=this.uploadingItems[this.uploadingItems.length-1]+1;return this.uploadingItems.push(e),e}removeUploadingItem(e){this.uploadingItems=this.uploadingItems.filter(t=>t!==e)}handlePaste(e){this.processDataTransferItems(e,e.clipboardData.items)}handleDrop(e){e.preventDefault(),this.processDataTransferItems(e,e.dataTransfer.items)}processDataTransferItems(e,t){t&&[...t].forEach(t=>{if(i(t)){e.preventDefault(),e.stopPropagation();const n=`${this.props.editorState.before}${this.props.editorState.selection}`,r=this.getUploadingItemIndex(),o=d(r);this.props.onChange({...this.props.editorState,selection:"",before:`${n}${!n||/\n$/.test(n)?"":"\n"}${o}\n`}),this.props.onImageUpload(t).then(e=>{this.removeUploadingItem(r);const t=p(this.props.editorState,o,`![image](${e})`);this.props.onChange(t)})}else this.props.onFileUpload(t)})}render(){const{autoFocus:e,name:t,editorState:n}=this.props,r=f(n);return o.createElement("textarea",{"data-test-id":"editor-text-area",autoFocus:e,ref:e=>{this.textarea=e},id:t,name:t,value:r,className:this.props.className,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onSelect:this.handleChange,onPaste:this.handlePaste,onDrop:this.handleDrop})}}g.defaultProps={content:"",name:"content",onChange:()=>{},onKeyCommand:()=>{},onImageUpload:l,onFileUpload:()=>{},commands:s},g.propTypes={autoFocus:a.bool,editorState:a.object,className:a.string,name:a.string,onChange:a.func,onKeyCommand:a.func,commands:a.array},e.exports=g},function(e,t){const n={13:"enter",27:"esc",32:"space"};e.exports=function(e,t){const r=[],o=(s=e.which||e.keyCode||e.charCode,n[s]||String.fromCharCode(s)),a=t.split("+");var s;e.shiftKey&&r.push("shift");e.altKey&&r.push("alt");(e.ctrlKey||e.metaKey)&&r.push("cmd");return r.push(o),c=r,i=a,c.length===i.length&&c.every(function(e){return i.some(function(t){return e.toLowerCase()===t.toLowerCase()})});var c,i}},function(e,t,n){e.exports=n(20)()},function(e,t,n){"use strict";var r=n(21);function o(){}e.exports=function(){function e(e,t,n,o,a,s){if(s!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=o,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=function(e){return e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")}},function(e,t,n){const{trim:r}=n(0),o=n(1),a=/^(\**)/,s=/(\**$)/,c=/(\s?)$/,i=/\n{2,}/g;e.exports.bold=function(e){const t=r(e);t.selection=t.selection.replace(i,"\n");const n=s.exec(t.before)[0],l=a.exec(t.after)[0];if(Math.min(n.length,l.length)>=2)t.before=t.before.replace(new RegExp("\\*{2}$",""),""),t.after=t.after.replace(new RegExp("^\\*{2}",""),"");else if(!t.selection&&l)t.after=t.after.replace(a,""),t.before=t.before.replace(c,"")+l+RegExp.$1;else{t.selection||l||(t.selection="");const e="**";t.before+=e,t.after=e+t.after}return o(t)},e.exports.isBold=function(e){const t=r(e),n=s.exec(t.before)[0],o=a.exec(t.after)[0];return Math.min(n.length,o.length)>=2||!t.selection.replace(i,"\n")&&o}},function(e,t){e.exports=function(e,t,n){let r,o=e.toString();return o=t+(o=(o=o.replace(/\/([gim]*)$/,function(e,t){return r=t,""})).replace(/(^\/|\/$)/g,""))+n,new RegExp(o,r)}},function(e,t,n){const{trim:r}=n(0),o=n(1),a=/^(_*)/,s=/(_*$)/,c=/(\s?)$/,i=/\n{2,}/g;e.exports.italic=function(e){const t=r(e);t.selection=t.selection.replace(i,"\n");const n=s.exec(t.before)[0],l=a.exec(t.after)[0];if(Math.min(n.length,l.length)>=1)t.before=t.before.replace(new RegExp("_$",""),""),t.after=t.after.replace(new RegExp("^_",""),"");else if(!t.selection&&l)t.after=t.after.replace(a,""),t.before=t.before.replace(c,"")+l+RegExp.$1;else{t.selection||l||(t.selection="");const e="_";t.before+=e,t.after=e+t.after}return o(t)},e.exports.isItalic=function(e){const t=r(e),n=s.exec(t.before)[0],o=a.exec(t.after)[0];return Math.min(n.length,o.length)>=1||!t.selection.replace(i,"\n")&&o}},function(e,t,n){const r=n(27),{trim:o,findTags:a}=n(0),s=n(1),c=/^[ ]{0,3}\[((?:attachment-)?\d+)]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,i=/^attachment-(\d+)$/i,l=/(\[)((?:\[[^\]]*\]|[^[\]])*)(\][ ]?(?:\n[ ]*)?\[)((?:attachment-)?\d+)(\])/g;function u({chunks:e,definition:t,attachment:n}){let r=0;const o={},a=[],s=Object.assign({},e);s.before=f(s.before),s.selection=f(s.selection),s.after=f(s.after),s.before=s.before.replace(l,d),t?n||p(t):s.selection=s.selection.replace(l,d);const u=r;return s.after=s.after.replace(l,d),s.after&&(s.after=s.after.replace(/\n*$/,"")),s.after||(s.selection=s.selection.replace(/\n*$/,"")),r=0,Object.keys(o).forEach(function(e){i.test(e)&&p(o[e])}),n&&p(t),s.after+=`\n\n${a.join("\n")}`,{anchor:u,result:s};function f(e){return c.lastIndex=0,e.replace(c,function(e,t,n,r,a){if(o[t]=e.replace(/\s*$/,""),r)return o[t]=e.replace(/["(](.+?)[")]$/,""),r+a;return""})}function p(e){r+=1,e=e.replace(/^[ ]{0,3}\[(attachment-)?(\d+)]:/,`  [$1${r}]:`),a.push(e)}function d(e,t,n,a,s,c){return n=n.replace(l,d),o[s]?(p(o[s]),t+n+a+r+c):e}}e.exports.linkOrMediaOrAttachment=function(e,t,n){if(!t)return s(e);const c="media"===n;let i=a(o(e),/\s*!?\[/,/][ ]?(?:\n[ ]*)?(\[.*?])?/);if(i.endTag.length>1&&i.startTag.length>0)return i.startTag=i.startTag.replace(/!?\[/,""),i.endTag="",i=u({chunks:i}).result,s(i);if(i.selection=i.startTag+i.selection+i.endTag,i.endTag="",i.startTag="",/\n\n/.test(i.selection))return i=u({chunks:i}).result,s(i);i.selection=` ${i.selection}`.replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);const l=r(t),f=(l.attachment?"  [attachment-9999]: ":" [9999]: ")+l.href+(l.title?` "${l.title}"`:""),p=u({chunks:i,definition:f,attachment:l.attachment}),{anchor:d}=p;return i=p.result,l.attachment||(i.startTag=c?"![":"[",i.endTag=`][${d}]`,i.selection||(i.selection="")),s(i)}},function(e,t){var n=/^\s*(.*?)(?:\s+"(.+)")?\s*$/,r=/^(?:https?|ftp):\/\//;function o(e){return e.replace(/\+/g," ")}function a(e){return e.replace(/\+/g,"%2b")}function s(e){return e?e.replace(/^\s+|\s+$/g,"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):null}function c(e){var t=e.replace(/^\s+|\s+$/g,"");return t.length&&"/"!==t[0]&&!r.test(t)?"http://"+t:t}e.exports=function(e){if(/data:/.test(e))return{href:e};return function(e,t,n){var r=t.replace(/\?.*$/,o);return r=decodeURIComponent(r),{href:c(r=(r=encodeURI(r).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")).replace(/\?.*$/,a)),title:s(n)}}.apply(null,e.match(n))}},function(e,t,n){const{skip:r,trim:o,findTags:a}=n(0),s=n(1),{unwrap:c}=n(7),i=/(\n|^)(([ ]{0,3}(\d+[.])[ \t]+.*)(\n.+|\n{2,}(\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,l=/(\n|^)(([ ]{0,3}([*+-])[ \t]+.*)(\n.+|\n{2,}([*+-].*)[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,u=/^\n*(([ ]{0,3}(\d+[.])[ \t]+.*)(\n.+|\n{2,}(\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,f=/^\n*(([ ]{0,3}([*+-])[ \t]+.*)(\n.+|\n{2,}([*+-].*)[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,p=/^\s*([*+-])/,d=/[^\n]\n\n[^\n]/,g=/^[ ]{0,3}(\d+[.])\s/gm,h=/^[ ]{0,3}([*+-])\s/gm;function m(e){return` ${e} `}e.exports.list=function(e,t){let n,b="-",y=0,T=1,x=1,$=a(e,/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/);return!$.before||/\n$/.test($.before)||/^\n/.test($.startTag)||($.before+=$.startTag,$.startTag=""),$.startTag&&(n=/\d+[.]/.test($.startTag),$.startTag="",$.selection=$.selection.replace(/\n[ ]{4}/g,"\n"),$=c($),$=r($),n&&($.after=t?$.after.replace(u,v):$.after.replace(f,v)),t===n)?s($):($.before=t?$.before.replace(i,k):$.before.replace(l,k),$.selection||($.selection=""),$.after=t?$.after.replace(u,C):$.after.replace(f,C),$=o($,!0),($=r($,{before:T,after:x,any:!0})).startTag=S(),$.selection=$.selection.replace(/\n(?!([ ]{0,3}- |[ ]{0,3}\d+\. ))/g,()=>`\n${S()}`),s($));function k(e){return p.test(e)&&(b=RegExp.$1),T=d.test(e)?1:0,v(e)}function C(e){return x=d.test(e)?1:0,v(e)}function S(){return m(t?`${y+=1}.`:b)}function v(e){return t?e.replace(g,S):e.replace(h,S)}}},function(e,t,n){const{settings:r}=n(4),{skip:o}=n(0),a=n(1),{wrap:s,unwrap:c}=n(7),i=/(>[ \t]*)$/,l=/^(>[ \t]*)/,u=/^(\n*)([^\r]+?)(\n*)$/,f=/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,p=/^\n((>|\s)*)\n/,d=/\n((>|\s)*)\n$/;e.exports.blockquote=function(e){let t,n="",g="",h=Object.assign({},e);return h.selection=h.selection.replace(u,function(e,t,n,r){return h.before+=t,h.after=r+h.after,n}),h.before=h.before.replace(i,function(e,t){return h.selection=t+h.selection,""}),h.selection=h.selection.replace(/^(\s|>)+$/,""),h.selection=h.selection||"",h.before&&function(){const e=h.before.replace(/\n$/,"").split("\n");let r,o=!1;for(let a=0;a<e.length;a++)r=!1,t=e[a],o=o&&t.length>0,/^>/.test(t)?(r=!0,!o&&t.length>1&&(o=!0)):r=!!/^[ \t]*$/.test(t)||o,r?n+=`${t}\n`:(g+=n+t,n="\n");/(^|\n)>/.test(n)||(g+=n,n="")}(),h.startTag=n,h.before=g,h.after&&(h.after=h.after.replace(/^\n?/,"\n")),h.after=h.after.replace(f,function(e){return h.endTag=e,""}),/^(?![ ]{0,3}>)/m.test(h.selection)?(s(h,r.lineLength-2),h.selection=h.selection.replace(/^/gm,"> "),m(!0),h=o(h)):(h.selection=h.selection.replace(/^[ ]{0,3}> ?/gm,""),c(h),m(!1),!/^(\n|^)[ ]{0,3}>/.test(h.selection)&&h.startTag&&(h.startTag=h.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(h.selection)&&h.endTag&&(h.endTag=h.endTag.replace(/^\n{0,2}/,"\n\n"))),/\n/.test(h.selection)||(h.selection=h.selection.replace(l,function(e,t){return h.startTag+=t,""})),a(h);function m(e){const t=e?"> ":"";function n(e,n){return`\n${n.replace(/^[ ]{0,3}>?[ \t]*$/gm,t)}\n`}h.startTag&&(h.startTag=h.startTag.replace(d,n)),h.endTag&&(h.endTag=h.endTag.replace(p,n))}}},function(e,t,n){const{skip:r,trim:o,findTags:a}=n(0),s=n(1),c=/\S[ ]*$/,i=/^[ ]*\S/,l=/\n/,u=/`/,f=/```[a-z]*\n?$/,p=/^```[a-z]*\n/,d=/^\n?```/,g=/\n```$/;e.exports.codeblock=function(e){const t=l.test(e.selection),n=i.test(e.after),h=c.test(e.before),m=f.test(e.before)&&d.test(e.after);return m||t||!h&&!n?function(e,t){let n=Object.assign({},e);if(t)return n.before=n.before.replace(f,""),n.after=n.after.replace(d,""),s(n);n.before=n.before.replace(/[ ]{4}|```[a-z]*\n$/,function(e){return n.selection=e+n.selection,""}),(n=r(n,{before:/(\n|^)(\t|[ ]{4,}|```[a-z]*\n).*\n$/.test(n.before)?0:1,after:/^\n(\t|[ ]{4,}|\n```)/.test(n.after)?0:1})).selection?p.test(n.selection)&&g.test(n.selection)?n.selection=n.selection.replace(/(^```[a-z]*\n)|(```$)/g,""):/^[ ]{0,3}\S/m.test(n.selection)?(n.before+="```\n",n.after=`\n\`\`\`${n.after}`):n.selection=n.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t|```[a-z]*)/gm,""):(n.startTag="```\n",n.endTag="\n```",n.selection="");return s(n)}(e,m):function(e){let t=o(e);(t=a(t,u,u)).startTag||t.endTag?t.endTag&&!t.startTag?(t.before+=t.endTag,t.endTag=""):(t.endTag="",t.startTag=""):(t.endTag="`",t.startTag="`",t.selection||(t.selection=""));return s(t)}(e)},e.exports.isCodeblock=function(e){return f.test(e.before)&&d.test(e.after)}},function(e,t,n){const{skip:r}=n(0),o=n(1),a=/\S[ ]*$/,s=/^[ ]*\S/,c=/\n/,i=/```notebook\n$/,l=/^```notebook\n/,u=/^\n?```/,f=/\n```$/;e.exports.notebook=function(e,t){const n=c.test(e.selection),p=s.test(e.after),d=a.test(e.before),g=i.test(e.before)&&u.test(e.after);return g||n||!d&&!p?function(e,t,n){let a=Object.assign({},e);if(t)return a.before=a.before.replace(i,""),a.after=a.after.replace(u,""),o(a);a.before=a.before.replace(/[ ]{4}|```[a-z]*\n$/,function(e){return a.selection=e+a.selection,""}),(a=r(a,{before:/(\n|^)(\t|[ ]{4,}|```[a-z]*\n).*\n$/.test(a.before)?0:1,after:/^\n(\t|[ ]{4,}|\n```)/.test(a.after)?0:1})).selection?l.test(a.selection)&&f.test(a.selection)?a.selection=a.selection.replace(/(^```[a-z]*\n)|(```$)/g,""):/^[ ]{0,3}\S/m.test(a.selection)?(a.before+="```notebook\n",a.after=`\n\`\`\`${a.after}`):a.selection=a.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t|```[a-z]*)/gm,""):(a.startTag="```notebook\n",a.endTag="\n```",a.selection=n||"");return o(a)}(e,g,t):o(Object.assign({},e,{startTag:"\n```notebook\n",endTag:"```\n"}))}},function(e,t,n){const{skip:r,findTags:o}=n(0),a=n(6),s=n(1);e.exports.heading=function(e,t){let n=t||0,c=Object.assign({},e);c.selection=c.selection.replace(/\s+/g," ").replace(/(^\s+|\s+$)/g,"");const i=(c=o(c,/#+[ ]*/,/[ ]*#+/)).before+c.startTag,l=i.substring(i.lastIndexOf("\n"));!t&&/#+/.test(l)&&(n=RegExp.lastMatch.length),c.endTag="",c.startTag="",c=o(c,null,/\s?(-+|=+)/),!t&&/=+/.test(c.endTag)&&(n=1),!t&&/-+/.test(c.endTag)&&(n=2),c.endTag="",c.startTag="",c=r(c,{before:1,after:1});const u=t||(4===n?1:n+1);return u>0&&(c.startTag=`${a("#",u)} `),s(c)}},function(e,t,n){const{skip:r}=n(0),o=n(1);e.exports.hr=function(e){const t=Object.assign({},e);return t.startTag="----------\n",t.selection="",o(r(t,{left:2,right:1,any:!0}))}},function(e,t){e.exports.getDataURL=function(e){return new Promise((t,n)=>{try{const r=e.getAsFile(),o=new FileReader;o.onload=(e=>{t(e.target.result)}),o.onerror=(e=>{n(e),o.abort()}),o.readAsDataURL(r)}catch(e){n(e)}})},e.exports.isImage=function(e){return"file"===e.kind&&"image"===e.type.split("/")[0]}}]);